<div class="card-blue profile-box profile-box-bg">
  <ul class="nav nav-tabs justify-content-between rounded-top-right rounded-top-left" role="tablist">
    <li class="nav-item">
      <a class="active btn btn-big rounded-0" data-toggle="tab" href="#tabs-1" role="tab">Séances à venir</a>
    </li>
    <li class="nav-item">
      <a class="btn btn-big rounded-0" data-toggle="tab" href="#tabs-2" role="tab">Historique des séances</a>
    </li>
    <li class="nav-item">
      <a class="btn btn-big rounded-0" data-toggle="tab" href="#tabs-3" role="tab">Mon abonnement</a>
    </li>
  </ul><!-- Tab panes -->
  <div class="tab-content p-3">
    <div class="tab-pane active" id="tabs-1" role="tabpanel">
      <table class="w-100 text-center">
        <thead class="w-100">
          <tr>
            <th>SPORT</th>
            <th>DATE</th>
            <th>HEURE</th>
            <th>LIEU</th>
            <th>STATUT</th>
            <th>COACH</th>
            </tr>
        </thead>
        <tbody>
          <% if @bookings_in_future.any? %>
            <% @bookings_in_future.each do |booking| %>
              <tr>
                <td class='py-2'><%= booking.lesson.sport_type %></td>
                <td class='py-2'><%= booking.lesson.date.strftime('%d/%m/%Y') %></td>
                <td class='py-2'><%= booking.lesson.date.strftime('%H:%M') %></td>
                <td class='py-2'><%= booking.lesson.location.name %></td>
                <td class='py-2'>
                  <% if booking.lesson.status == "pending" %>
                  En attente
                  <% end %>
                </td>
                <td class='py-2'><%= booking.lesson.user.first_name if booking.lesson.user_id%></td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="tab-pane" id="tabs-2" role="tabpanel">
      <table class="w-100 text-center">
        <thead class="w-100">
          <tr>
            <th>SPORT</th>
            <th>DATE</th>
            <th>HEURE</th>
            <th>LIEU</th>
            <th>STATUT</th>
            <th>COACH</th>
            </tr>
        </thead>
        <tbody>
          <% if @bookings_in_past.any? %>
            <% @bookings_in_past.each do |booking| %>
              <tr>
                <td><%= booking.lesson.sport_type %></td>
                <td><%= booking.lesson.date.strftime('%d/%m/%Y') %></td>
                <td><%= booking.lesson.date.strftime('%H:%M') %></td>
                <td><%= booking.lesson.location.name %></td>
                <td><%= booking.lesson.status %></td>
                <td><%= booking.lesson.user.first_name if booking.lesson.user_id%></td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="tab-pane" id="tabs-3" role="tabpanel">
      <h3 class="text-blue text-center">Mon abonnement</h3>
      <% if current_user.subscription.stripe_id %>
        <div class="text-center">
          <p class="text-blue mt-5">Vous êtes actuellement abonné(e) au plan <%= current_user.subscription.nickname %>.</p>
          <form action="/customer_portal_sessions" method="POST">
            <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
            <button class="btn btn-kotch btn-red">Gérer mon abonnement</button>
          </form>
          <% if current_user.credit_count > 0 %>
            <p class="text-blue mt-5">Vous avez <%= current_user.credit_count%> crédits hors abonnement.</p>
          <% else %>
            <p class="text-blue mt-5">Vous n'avez pas de crédits hors abonnement.</p>
          <% end %>
        </div>
      <% else %>
        <div class="text-center">
          <p class="text-blue">Vous n'avez pas d'abonnement à Koach.</p>
          <%= link_to "Je m'abonne", offers_path, class:'btn btn-red btn-kotch'  %>
        </div>
      <% end %>
    </div>
  </div>
</div>


<%#
REFERENCES FOR CSS CLASSES

.profile-box, .profile-box-bg                         => pages/_profile.scss
%>
